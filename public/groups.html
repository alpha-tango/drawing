<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
        background-color: lightgray;
      }
    </style>
  </head>
  <body>
    <div id="container" background-color='black'></div>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.0.2.min.js"></script>
    <script defer="defer">
      var stage = new Kinetic.Stage({
        container: 'container',
        width: 1000,
        height: 600,
      });

      var shapesLayer = new Kinetic.Layer();

      for(var n = 10; n < stage.width(); n += stage.width()/50) {
        for (var m = 10; m < stage.height(); m += stage.height()/25){
          var i = n;
          var j = m;
          var circle = new Kinetic.Circle({
            x: i,
            y: j,
            radius: stage.width()/150,
            fill: 'gray',
          });

          circle.on('mousedown', function(event) {
            var shape = event.target;
            shape.attrs.fill = 'white';
            shapesLayer.draw();
          });

          var repeater;

          circle.on('mouseover', function(event) {
            var shape = event.target;
            grow = function(obj) {
              obj.attrs.radius += 2;
            };
            repeater = setInterval(function() {grow(shape)}, 100);
            shapesLayer.draw();
          });

          circle.on('mouseout', function(event) {
            var shape = event.target;
            clearInterval(repeater);
          });

          shapesLayer.add(circle);
      }
    }

      //





      // circle.on('mouseup', function() {
      //   // var shape = event.target;
      //   // console.log(shape);
      //   // stage.add(shapesLayer);
      // });

      stage.add(shapesLayer);
    </script>
  </body>
</html>
